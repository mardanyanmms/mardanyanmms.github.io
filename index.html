<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Name Picker - CSV Upload</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 700px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
        }
        
        .upload-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            background-color: #fafafa;
        }
        
        .file-input {
            margin: 10px 0;
        }
        
        input[type="file"] {
            margin: 10px 0;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .pick-button {
            background-color: #28a745;
        }
        
        .pick-button:hover {
            background-color: #1e7e34;
        }
        
        .result {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            margin: 20px 0;
            min-height: 30px;
            transition: opacity 0.3s ease;
        }
        
        .name-list {
            text-align: left;
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .name-list h3 {
            margin-top: 0;
            color: #333;
            text-align: center;
        }
        
        .names {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            font-size: 14px;
        }
        
        .status {
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .csv-format {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
            text-align: left;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ² Random Name Picker - CSV Upload</h1>
        
        <div class="upload-section">
            <h3>Upload CSV File</h3>
            <div class="file-input">
                <input type="file" id="csvFile" accept=".csv" onchange="handleFileUpload(event)">
                <button onclick="loadSampleData()">Use Sample Data</button>
            </div>
            <div class="csv-format">
                <strong>CSV Format:</strong> One name per line or comma-separated names<br>
                Example: Alice,Bob,Charlie or each name on a new line
            </div>
        </div>
        
        <div id="status" class="status hidden"></div>
        
        <div id="controls" class="hidden">
            <button class="pick-button" onclick="pickRandomName()">ðŸŽ² Pick a Random Name!</button>
            <button onclick="clearData()">Clear Data</button>
        </div>
        
        <div class="result" id="selectedName"></div>
        
        <div class="name-list hidden" id="nameListContainer">
            <h3>Loaded Names (<span id="nameCount">0</span>)</h3>
            <div class="names" id="namesList"></div>
        </div>
    </div>

    <script>
        let names = [];

        // Handle file upload
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const csvContent = e.target.result;
                parseCSV(csvContent);
            };
            reader.readAsText(file);
        }

        // Parse CSV content
        function parseCSV(csvContent) {
            try {
                const lines = csvContent.split('\n');
                const parsedNames = [];

                lines.forEach(line => {
                    line = line.trim();
                    if (line) {
                        if (line.includes(',')) {
                            const lineNames = line.split(',').map(name => name.trim()).filter(name => name);
                            parsedNames.push(...lineNames);
                        } else {
                            parsedNames.push(line);
                        }
                    }
                });

                names = [...new Set(parsedNames)].filter(name => name.length > 0);

                if (names.length === 0) {
                    showStatus('No valid names found in the CSV file.', 'error');
                    return;
                }

                showStatus(`Successfully loaded ${names.length} names!`, 'success');
                displayNamesList();
                showControls();
                clearResult();

            } catch (error) {
                showStatus('Error parsing CSV file. Please check the format.', 'error');
                console.error('CSV parsing error:', error);
            }
        }

        // Load sample data
        function loadSampleData() {
            names = [
                "Alice Johnson", "Bob Smith", "Charlie Brown", "Diana Prince", "Edward Norton",
                "Fiona Apple", "George Lucas", "Hannah Montana", "Isaac Newton", "Julia Roberts",
                "Kevin Hart", "Luna Lovegood", "Michael Jordan", "Nina Simone", "Oliver Twist",
                "Petra Collins", "Quinn Fabray", "Rachel Green", "Samuel Jackson", "Tina Turner"
            ];
            
            showStatus(`Sample data loaded with ${names.length} names!`, 'success');
            displayNamesList();
            showControls();
            clearResult();
        }

        // Pick a random name
        function pickRandomName() {
            if (names.length === 0) {
                showStatus('Please upload a CSV file or load sample data first.', 'error');
                return;
            }

            const randomIndex = Math.floor(Math.random() * names.length);
            const selectedName = names[randomIndex];
            
            const resultElement = document.getElementById('selectedName');
            resultElement.style.opacity = '0';
            
            setTimeout(() => {
                resultElement.textContent = `ðŸŽ‰ ${selectedName}`;
                resultElement.style.opacity = '1';
            }, 150);
        }

        // Display names list
        function displayNamesList() {
            const namesListElement = document.getElementById('namesList');
            const nameCountElement = document.getElementById('nameCount');
            
            namesListElement.innerHTML = names.map(name => `<div>${name}</div>`).join('');
            nameCountElement.textContent = names.length;
            
            document.getElementById('nameListContainer').classList.remove('hidden');
        }

        // Show status message
        function showStatus(message, type) {
            const statusElement = document.getElementById('status');
            statusElement.textContent = message;
            statusElement.className = `status ${type}`;
            statusElement.classList.remove('hidden');
            
            if (type === 'success') {
                setTimeout(() => {
                    statusElement.classList.add('hidden');
                }, 3000);
            }
        }

        // Show controls
        function showControls() {
            document.getElementById('controls').classList.remove('hidden');
        }

        // Clear all data
        function clearData() {
            names = [];
            document.getElementById('csvFile').value = '';
            document.getElementById('controls').classList.add('hidden');
            document.getElementById('nameListContainer').classList.add('hidden');
            document.getElementById('status').classList.add('hidden');
            clearResult();
        }

        // Clear result
        function clearResult() {
            document.getElementById('selectedName').textContent = '';
        }
    </script>
</body>
</html>
